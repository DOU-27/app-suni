{% extends "base/base.html" %}
{% load staticfiles widget_tweaks %}

{% block page_title %}
<title>Salidas</title>
{% endblock page_title %}

{% block content %}
<section class="content-header">
	<h1>Salida del Kardex</h1>
</section>
<section class="content">
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="col-md-8 col-md-offset-2">
				<div class="nav-tabs-custom">
					<!-- pestañas -->
					<ul class="nav nav-tabs nav-justified">
						<li class="active">
							<a href="#nueva-salida" data-toggle="tab"><i class="fa fa-sign-in"></i> Nueva Salida</a>
						</li>
						<li>
							<a href="#buscar-salida" data-toggle="tab"><i class="fa fa-search"></i> Buscar salida</a>
						</li>
						<li>
							<a href="#listar-salida" data-toggle="tab"><i class="fa fa-list"></i> Listar salidas</a>
						</li>
					</ul>
					<!-- /pestañas -->

					<div class="tab-content">
						<!-- panel de creación -->
						<div class="tab-pane active" id="nueva-salida">
							<form action="{{ action }}" method="post">
								{% csrf_token %}
								<table class="table table-hover table-condensed">
									{% for field in form %}
									<tr>
										<td>{{ field.label_tag }}</td>
										<td>{{ field|add_class:"form-control" }}</td>
									</tr>
									{% endfor %}
									<tr>
										<td></td>
										<td><button class="btn btn-primary btn-block">Guardar</button></td>
									</tr>
								</table>
							</form>
						</div>
						<!-- /panel de creación -->

						<!-- panel de búsqueda -->
						<div class="tab-pane" id="buscar-salida">
							<form id="salida-buscar-form" action="{% url 'salida_api' %}">
								<div class="input-group input-group-sm">
									<input type="number" min="1" class="form-control" id="salida-id">
									<span class="input-group-btn">
										<input type="submit" class="btn btn-info btn-flat" value="Buscar">
									</span>
								</div>
							</form>
						</div>
						<!-- /panel de búsqueda -->
					</div>
				</div>
			</div>
		</div>
	</div>

</section>
{% endblock content %}
{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static "css/kardex.css" %}">
{% endblock extra_css %}

{% block extra_js %}
<script src="{% static "js/extrajs/kardex.js" %}"></script>
<script src="{% static "js/jquery.formset.js" %}"></script>
<script type="text/javascript">
	SalidaCreate.init();
</script>

{% endblock extra_js %}
<!--
#def clean_cantidad(self):
	#	cantidad = self.cleaned_data.get('cantidad')
	#	if cantidad <= 0:
	#		raise forms.ValidationError("Este campo tiene que ser mayor a 0")
#
#		existente = self.cleaned_data.get('equipo').existencia
#		if cantidad > existente:
#			raise forms.ValidationError("El campo tiene que ser menor o igual a la existente (" + str(existente) + ")" )	
#		return cantidad	-->